(function(){"use strict";var o={6082:function(o,t,r){var i=r(9242),e=r(7113),n=(r(4415),r(3396));const l={valign:"top"};function s(o,t,r,i,e,s){const u=(0,n.up)("elevator"),c=(0,n.up)("floorboard");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("tr",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.elevator_number,(o=>((0,n.wg)(),(0,n.iD)("td",{key:o},[(0,n.Wm)(u,{ref_for:!0,ref:"elevator_group",onUpArrive:s.uparriveHandler,onDownArrive:s.downarriveHandler},null,8,["onUpArrive","onDownArrive"])])))),128)),(0,n._)("td",l,[(0,n.Wm)(c,{ref:"floor_board",onUpRequest:s.upHandler,onDownRequest:s.downHandler},null,8,["onUpRequest","onDownRequest"])])])])}var u=r(7139);const c={class:"Border"},a={class:"ButtonGroup"},d={class:"ButtonGroup"},f={class:"ButtonBox"},_={class:"ButtonBox"},h={class:"ButtonBox"},p={class:"ButtonBox"};function g(o,t,r,i,e,l){const s=(0,n.up)("warning-filled"),g=(0,n.up)("el-icon"),v=(0,n.up)("top"),m=(0,n.up)("bottom"),w=(0,n.up)("el-card"),b=(0,n.up)("el-button"),W=(0,n.up)("caret-left"),D=(0,n.up)("caret-right"),y=(0,n.up)("bell-filled");return(0,n.wg)(),(0,n.iD)("div",c,[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(w,{class:"Display"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{size:20,class:(0,u.C_)({DangerAlert:this.danger})},{default:(0,n.w5)((()=>[(0,n.Wm)(s)])),_:1},8,["class"]),(0,n.Wm)(g,{size:20,class:(0,u.C_)({active:1==this.cur_direction})},{default:(0,n.w5)((()=>[(0,n.Wm)(v)])),_:1},8,["class"]),(0,n._)("span",{class:(0,u.C_)({active:this.cur_door})},(0,u.zw)(this.cur_floor),3),(0,n.Wm)(g,{size:20,class:(0,u.C_)({active:-1==this.cur_direction})},{default:(0,n.w5)((()=>[(0,n.Wm)(m)])),_:1},8,["class"]),(0,n.Wm)(g,{size:20,class:(0,u.C_)({DangerAlert:this.danger})},{default:(0,n.w5)((()=>[(0,n.Wm)(s)])),_:1},8,["class"])])),_:1}),(0,n._)("div",a,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.buttons_floor,((o,t)=>((0,n.wg)(),(0,n.iD)("span",{key:t,class:"ButtonBox"},[(0,n.Wm)(b,{type:"info",class:"MineButton",onClick:o=>l.FloorClick(t+1),disabled:this.buttons_floor[t],plain:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(t+1),1)])),_:2},1032,["onClick","disabled"])])))),128))]),(0,n._)("div",d,[(0,n._)("span",f,[(0,n.Wm)(b,{type:"warning",class:"MineButton",disabled:this.cur_moving,onClick:t[0]||(t[0]=o=>this.DoorOpen(5e3)),plain:""},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(W)])),_:1}),(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(D)])),_:1})])),_:1},8,["disabled"])]),(0,n._)("span",_,[(0,n.Wm)(b,{type:"warning",class:"MineButton",disabled:this.cur_moving,onClick:this.DoorClose,plain:""},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(D)])),_:1}),(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(W)])),_:1})])),_:1},8,["disabled","onClick"])]),(0,n._)("span",h,[(0,n.Wm)(b,{type:"danger",class:"MineButton",onClick:this.DangerAlert,plain:""},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y)])),_:1})])),_:1},8,["onClick"])]),(0,n._)("span",p,[(0,n.Wm)(b,{type:"primary",class:"MineButton",plain:"",disabled:!0},{default:(0,n.w5)((()=>[(0,n._)("b",null,(0,u.zw)(l.DoorStatus),1)])),_:1})])])])),_:1})])}var v={name:"elevator",data(){return{cur_floor:1,cur_direction:0,cur_moving:!1,cur_door:!1,buttons_floor:[],mission_floor:[],danger:!1,mine_clock:null}},methods:{EleInit(){for(let o=0;o<20;++o)this.buttons_floor.push(!1)},DirectionNext(){if(!this.mission_floor.length)return this.cur_moving=!1,void(this.cur_direction=0);var o=Math.max.apply(Math,this.mission_floor),t=Math.min.apply(Math,this.mission_floor);if(1==this.cur_direction){if(o-this.cur_floor>0)return;this.cur_direction=-1}else if(-1==this.cur_direction){if(t-this.cur_floor<0)return;this.cur_direction=1}},DoorOpen(o){this.cur_moving?console.log("有bug！运行的时候怎么能开门呢？"):this.cur_door||(this.cur_door=!0,setTimeout((()=>{this.DoorClose()}),o))},DoorClose(){this.DirectionNext(),this.cur_moving?console.log("有bug！运行的时候怎么能关门呢？"):this.cur_door&&(this.cur_door=!1,0==this.mission_floor.length?this.cur_moving=!1:this.cur_moving=!0)},FloorClick(o){if(console.log(o+"被按下！"),o==this.cur_floor&&0==this.cur_moving)return console.log("已在当前楼层停止"),void this.DoorOpen(5e3);-1==this.mission_floor.indexOf(o)?(this.mission_floor.push(o),this.buttons_floor[o-1]=!0):console.log("当前楼层已经在任务队列中了！")},UpdateStatus(){if(console.log("更新电梯状态"),!this.cur_door){if(0==this.mission_floor.length)return 0!=this.cur_direction&&(this.cur_direction=0),void(0!=this.cur_moving&&(this.cur_moving=!1));this.cur_moving=!0,this.cur_floor=this.cur_floor+this.cur_direction;var o=this.mission_floor.indexOf(this.cur_floor);if(-1==o){if(0==this.cur_direction){let o=this.mission_floor[0]-this.cur_floor;this.cur_direction=o>0?1:-1}}else this.mission_floor.splice(o,1),this.buttons_floor[this.cur_floor-1]=!1,this.cur_moving=!1,this.mission_floor.length||(this.cur_moving=!1,this.cur_direction=0),0==this.cur_direction?(this.$emit("upArrive",this.cur_floor),this.$emit("downArrive",this.cur_floor)):1==this.cur_direction?this.$emit("upArrive",this.cur_floor):-1==this.cur_direction&&this.$emit("downArrive",this.cur_floor),this.DoorOpen(5e3)}},DangerAlert(){this.danger=!0,setTimeout((()=>{this.danger=!1}),1e3)}},computed:{DoorStatus(){return this.cur_door?"开":"关"}},created(){this.EleInit(),this.mine_clock=setInterval(this.UpdateStatus,1500)},destroyed(){clearInterval(this.mine_clock)}},m=r(89);const w=(0,m.Z)(v,[["render",g],["__scopeId","data-v-4b257c80"]]);var b=w;const W={class:"Border"},D={class:"ButtonGroup"};function y(o,t,r,i,e,l){const s=(0,n.up)("arrow-up-bold"),c=(0,n.up)("el-icon"),a=(0,n.up)("el-button"),d=(0,n.up)("arrow-down-bold"),f=(0,n.up)("el-button-group"),_=(0,n.up)("el-card");return(0,n.wg)(),(0,n.iD)("div",W,[(0,n.Wm)(_,null,{default:(0,n.w5)((()=>[(0,n._)("div",D,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.buttons_upordown,((o,t)=>((0,n.wg)(),(0,n.iD)("span",{key:t,class:"ButtonBox"},[(0,n.Wm)(f,{class:"ml-4"},{default:(0,n.w5)((()=>[(0,n.Wm)(a,{type:"primary",class:(0,u.C_)({MineButton:!0,active:o.up}),onClick:o=>this.ButtonClick(t+1,1),plain:""},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(s)])),_:1})])),_:2},1032,["class","onClick"]),(0,n.Wm)(a,{type:"primary",class:"MineButton",disabled:!0,plain:""},{default:(0,n.w5)((()=>[(0,n._)("b",null,(0,u.zw)(t+1),1)])),_:2},1024),(0,n.Wm)(a,{type:"primary",class:(0,u.C_)({MineButton:!0,active:o.down}),onClick:o=>this.ButtonClick(t+1,-1),plain:""},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d)])),_:1})])),_:2},1032,["class","onClick"])])),_:2},1024)])))),128))])])),_:1})])}var B={name:"floorboard",data(){return{buttons_upordown:[]}},methods:{BoardInit(){for(let o=0;o<20;o++){let o={up:!1,down:!1};this.buttons_upordown.push(o)}},ButtonClick(o,t){1==t&&1!=this.buttons_upordown[o-1].up?(this.buttons_upordown[o-1].up=!0,this.$emit("upRequest",{floor_calling:o,direction_calling:t})):-1==t&&1!=this.buttons_upordown[o-1].down&&(this.buttons_upordown[o-1].down=!0,this.$emit("downRequest",{floor_calling:o,direction_calling:t}))}},created(){this.BoardInit()}};const k=(0,m.Z)(B,[["render",y],["__scopeId","data-v-abb5f592"]]);var C=k,O={name:"App",components:{elevator:b,floorboard:C},data(){return{elevator_number:5,waiting_queue:[]}},created(){for(let o=0;o<2;o++){let t=[];for(let o=0;o<20;o++)t[o]=null;this.waiting_queue[o]=t}},mounted(){this.$nextTick((()=>{for(var o=0;o<5;o++)this.$refs.elevator_group[o].cur_floor=1+4*o}))},methods:{uparriveHandler(o){this.$refs.floor_board.buttons_upordown[o-1].up=!1},downarriveHandler(o){this.$refs.floor_board.buttons_upordown[o-1].down=!1},minDistenceEle(o,t,r){var i=100,e=0;for(let n=0;n<o.length;n++)Math.abs(r[n].cur_floor-t)<i&&(i=Math.abs(r[n].cur_floor-t),e=n);return o[e]},upHandler(o){let t=this.$refs.elevator_group,{direction_calling:r,floor_calling:i}=o;var e=[];for(let l=0;l<5;l++){if(0==t[l].cur_direction){if(t[l].cur_floor==i)return this.uparriveHandler(i),void t[l].DoorOpen(2e3);e.push(l)}t[l].cur_direction==r&&i-t[l].cur_floor>0&&e.push(l)}if(0==e.length){console.log(i+"层的"+r+"请求放入等待队列");var n=setInterval(this.upWaiting,500,{direction_calling:r,floor_calling:i,id:n});this.waiting_queue[0][i-1]=n}else{let o=this.minDistenceEle(e,i,t);-1==this.$refs.elevator_group[o].mission_floor.indexOf(i)&&this.$refs.elevator_group[o].mission_floor.push(i)}},upWaiting(o){let{direction_calling:t,floor_calling:r}=o;console.log("检测"+r+"层的"+t+"请求");let i=this.$refs.elevator_group;var e=[],n=this.waiting_queue[0][r-1];for(let l=0;l<5;l++){if(0==i[l].cur_direction){if(i[l].cur_floor==r)return i[l].DoorOpen(2e3),console.log(r+"层的"+t+"请求已满足，在"+l+"号电梯"),void clearInterval(n);e.push(l)}i[l].cur_direction==t&&r-i[l].cur_floor>0&&e.push(l)}if(0!=e.length){let o=this.minDistenceEle(e,r,i);return-1==this.$refs.elevator_group[o].mission_floor.indexOf(r)&&this.$refs.elevator_group[o].mission_floor.push(r),clearInterval(n),void console.log(r+"层的"+t+"请求已放入"+o+"号电梯任务队列")}console.log(r+"层的"+t+"请求暂未满足 继续等待")},downHandler(o){let t=this.$refs.elevator_group,{direction_calling:r,floor_calling:i}=o;var e=[];for(let l=0;l<5;l++){if(0==t[l].cur_direction){if(t[l].cur_floor==i)return this.downarriveHandler(i),void t[l].DoorOpen(2e3);e.push(l)}t[l].cur_direction==r&&i-t[l].cur_floor<0&&e.push(l)}if(0==e.length){console.log(i+"层的"+r+"请求放入等待队列");var n=setInterval(this.downWaiting,500,{direction_calling:r,floor_calling:i,id:n});this.waiting_queue[1][i-1]=n}else{let o=this.minDistenceEle(e,i,t);-1==this.$refs.elevator_group[o].mission_floor.indexOf(i)&&this.$refs.elevator_group[o].mission_floor.push(i)}},downWaiting(o){let{direction_calling:t,floor_calling:r}=o;console.log("检测"+r+"层的"+t+"请求");let i=this.$refs.elevator_group;var e=[],n=this.waiting_queue[1][r-1];for(let l=0;l<5;l++){if(0==i[l].cur_direction){if(i[l].cur_floor==r)return i[l].DoorOpen(2e3),console.log(r+"层的"+t+"请求已满足，在"+l+"号电梯"),void clearInterval(n);e.push(l)}i[l].cur_direction==t&&r-i[l].cur_floor<0&&e.push(l)}if(0!=e.length){let o=this.minDistenceEle(e,r,i);return-1==this.$refs.elevator_group[o].mission_floor.indexOf(r)&&this.$refs.elevator_group[o].mission_floor.push(r),clearInterval(n),void console.log(r+"层的"+t+"请求已放入"+o+"号电梯任务队列")}console.log(r+"层的"+t+"请求暂未满足 继续等待")}}};const $=(0,m.Z)(O,[["render",s]]);var x=$,M=r(7212);const I=(0,i.ri)(x);I.use(e.Z);for(const[A,H]of Object.entries(M))I.component(A,H);I.mount("#app")}},t={};function r(i){var e=t[i];if(void 0!==e)return e.exports;var n=t[i]={exports:{}};return o[i].call(n.exports,n,n.exports,r),n.exports}r.m=o,function(){var o=[];r.O=function(t,i,e,n){if(!i){var l=1/0;for(a=0;a<o.length;a++){i=o[a][0],e=o[a][1],n=o[a][2];for(var s=!0,u=0;u<i.length;u++)(!1&n||l>=n)&&Object.keys(r.O).every((function(o){return r.O[o](i[u])}))?i.splice(u--,1):(s=!1,n<l&&(l=n));if(s){o.splice(a--,1);var c=e();void 0!==c&&(t=c)}}return t}n=n||0;for(var a=o.length;a>0&&o[a-1][2]>n;a--)o[a]=o[a-1];o[a]=[i,e,n]}}(),function(){r.n=function(o){var t=o&&o.__esModule?function(){return o["default"]}:function(){return o};return r.d(t,{a:t}),t}}(),function(){r.d=function(o,t){for(var i in t)r.o(t,i)&&!r.o(o,i)&&Object.defineProperty(o,i,{enumerable:!0,get:t[i]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"===typeof window)return window}}()}(),function(){r.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)}}(),function(){r.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}}(),function(){var o={143:0};r.O.j=function(t){return 0===o[t]};var t=function(t,i){var e,n,l=i[0],s=i[1],u=i[2],c=0;if(l.some((function(t){return 0!==o[t]}))){for(e in s)r.o(s,e)&&(r.m[e]=s[e]);if(u)var a=u(r)}for(t&&t(i);c<l.length;c++)n=l[c],r.o(o,n)&&o[n]&&o[n][0](),o[n]=0;return r.O(a)},i=self["webpackChunkelevator"]=self["webpackChunkelevator"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=r.O(void 0,[998],(function(){return r(6082)}));i=r.O(i)})();
//# sourceMappingURL=app.69b75da7.js.map